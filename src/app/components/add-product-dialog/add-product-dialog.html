<div
  class="fixed inset-0 bg-black/50 bg-opacity-20 flex items-center justify-center z-50"
  (click)="onClose()"
>
  <div
    class="bg-white rounded-xl shadow-2xl w-11/12 max-w-2xl max-h-screen overflow-hidden animate-in slide-in-from-bottom-4 duration-200"
    (click)="$event.stopPropagation()"
  >
    <div class="flex justify-between items-center p-6 border-b border-gray-200">
      <h2 class="text-xl font-semibold text-gray-900">{{ dialogTitle }}</h2>
      <button
        class="p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors duration-200"
        (click)="onClose()"
      >
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <div class="p-6 max-h-96 overflow-y-auto">
      <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="space-y-4">
        <!-- Product Name -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Product Name *
          </label>
          <input
            type="text"
            formControlName="name"
            placeholder="Enter product name"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"
            [class.border-red-500]="hasError('name')"
          />
          <p *ngIf="hasError('name')" class="mt-1 text-sm text-red-600">
            {{ getErrorMessage("name") }}
          </p>
        </div>

        <!-- SKU and Category Row -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              SKU *
            </label>
            <input
              type="text"
              formControlName="sku"
              placeholder="Enter SKU"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"
              [class.border-red-500]="hasError('sku')"
            />
            <p *ngIf="hasError('sku')" class="mt-1 text-sm text-red-600">
              {{ getErrorMessage("sku") }}
            </p>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Category *
            </label>
            <select
              formControlName="category"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"
              [class.border-red-500]="hasError('category')"
            >
              <option value="">Select category</option>
              <option value="Electronics">Electronics</option>
              <option value="Furniture">Furniture</option>
              <option value="Clothing">Clothing</option>
              <option value="Books">Books</option>
              <option value="Sports">Sports</option>
              <option value="Other">Other</option>
            </select>
            <p *ngIf="hasError('category')" class="mt-1 text-sm text-red-600">
              {{ getErrorMessage("category") }}
            </p>
          </div>
        </div>

        <!-- Description -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Description
          </label>
          <textarea
            formControlName="description"
            rows="3"
            placeholder="Enter product description"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors resize-none"
          ></textarea>
        </div>

        <!-- Price and Stock Row -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Price *
            </label>
            <div class="relative">
              <span class="absolute left-3 top-2 text-gray-500">$</span>
              <input
                type="number"
                formControlName="price"
                placeholder="0.00"
                step="0.01"
                class="w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"
                [class.border-red-500]="hasError('price')"
              />
            </div>
            <p *ngIf="hasError('price')" class="mt-1 text-sm text-red-600">
              {{ getErrorMessage("price") }}
            </p>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Stock Quantity *
            </label>
            <input
              type="number"
              formControlName="stock"
              placeholder="0"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"
              [class.border-red-500]="hasError('stock')"
            />
            <p *ngIf="hasError('stock')" class="mt-1 text-sm text-red-600">
              {{ getErrorMessage("stock") }}
            </p>
          </div>
        </div>

        <!-- Min Stock and Status Row -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Minimum Stock *
            </label>
            <input
              type="number"
              formControlName="minStock"
              placeholder="0"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"
              [class.border-red-500]="hasError('minStock')"
            />
            <p *ngIf="hasError('minStock')" class="mt-1 text-sm text-red-600">
              {{ getErrorMessage("minStock") }}
            </p>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Status *
            </label>
            <select
              formControlName="status"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"
              [class.border-red-500]="hasError('status')"
            >
              <option value="active">Active</option>
              <option value="low_stock">Low Stock</option>
              <option value="out_of_stock">Out of Stock</option>
            </select>
            <p *ngIf="hasError('status')" class="mt-1 text-sm text-red-600">
              {{ getErrorMessage("status") }}
            </p>
          </div>
        </div>

        <!-- Supplier and Image URL Row -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Supplier *
            </label>
            <input
              type="text"
              formControlName="supplier"
              placeholder="Enter supplier name"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"
              [class.border-red-500]="hasError('supplier')"
            />
            <p *ngIf="hasError('supplier')" class="mt-1 text-sm text-red-600">
              {{ getErrorMessage("supplier") }}
            </p>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Image URL
            </label>
            <input
              type="text"
              formControlName="imageUrl"
              placeholder="Enter image URL"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"
            />
          </div>
        </div>
      </form>
    </div>

    <div class="flex justify-end gap-3 p-6 bg-gray-50 border-t border-gray-200">
      <button
        mat-button
        type="button"
        (click)="onClose()"
        class="!text-gray-600 !border !border-gray-300 hover:!bg-gray-100 hover:!border-gray-400 !px-4 !py-2 !rounded-lg !font-medium !transition-all !duration-200"
      >
        Cancel
      </button>
      <button
        mat-raised-button
        type="submit"
        [disabled]="productForm.invalid"
        (click)="onSubmit()"
        class="!bg-emerald-600 hover:!bg-emerald-700 !text-white !px-6 !py-2 !rounded-lg !font-semibold !shadow-lg hover:!shadow-xl !transition-all !duration-200 disabled:!bg-gray-400 disabled:!cursor-not-allowed"
      >
        {{ submitButtonText }}
      </button>
    </div>
  </div>
</div>
